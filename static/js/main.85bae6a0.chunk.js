(this.webpackJsonppathfinder=this.webpackJsonppathfinder||[]).push([[0],[,,,,,,,,function(t,e,s){t.exports=s(17)},,,,,function(t,e,s){},function(t,e,s){t.exports=s.p+"static/media/logo.5d5d9eef.svg"},function(t,e,s){},function(t,e,s){},function(t,e,s){"use strict";s.r(e);var r=s(0),a=s.n(r),i=s(2),n=s.n(i),h=(s(13),s(14),s(15),s(4)),o=s(5),c=s(1),l=s(6),u=s(7),q=(s(16),['{"q":4,"r":-2,"s":-2}','{"q":4,"r":-1,"s":-3}','{"q":4,"r":0,"s":-4}','{"q":4,"r":1,"s":-5}','{"q":3,"r":2,"s":-5}','{"q":2,"r":3,"s":-5}','{"q":1,"r":4,"s":-5}','{"q":0,"r":5,"s":-5}','{"q":-1,"r":6,"s":-5}','{"q":-2,"r":7,"s":-5}','{"q":4,"r":-4,"s":0}','{"q":3,"r":-4,"s":1}','{"q":2,"r":-4,"s":2}','{"q":1,"r":-4,"s":3}','{"q":2,"r":-5,"s":3}','{"q":3,"r":-6,"s":3}','{"q":4,"r":-7,"s":3}','{"q":5,"r":-9,"s":4}','{"q":6,"r":-9,"s":3}','{"q":7,"r":-9,"s":2}','{"q":8,"r":-9,"s":1}','{"q":9,"r":-9,"s":0}','{"q":10,"r":-9,"s":-1}','{"q":11,"r":-9,"s":-2}','{"q":12,"r":-9,"s":-3}','{"q":13,"r":-9,"s":-4}','{"q":14,"r":-9,"s":-5}','{"q":15,"r":-9,"s":-6}','{"q":15,"r":-8,"s":-7}','{"q":14,"r":-7,"s":-7}','{"q":14,"r":-6,"s":-8}','{"q":13,"r":-5,"s":-8}','{"q":13,"r":-4,"s":-9}','{"q":12,"r":-3,"s":-9}','{"q":12,"r":-2,"s":-10}','{"q":11,"r":-1,"s":-10}','{"q":11,"r":0,"s":-11}','{"q":10,"r":1,"s":-11}','{"q":10,"r":2,"s":-12}','{"q":9,"r":3,"s":-12}','{"q":9,"r":4,"s":-13}','{"q":8,"r":5,"s":-13}','{"q":8,"r":6,"s":-14}','{"q":7,"r":7,"s":-14}','{"q":7,"r":8,"s":-15}','{"q":6,"r":9,"s":-15}','{"q":5,"r":9,"s":-14}','{"q":4,"r":9,"s":-13}','{"q":3,"r":9,"s":-12}','{"q":2,"r":9,"s":-11}','{"q":1,"r":9,"s":-10}','{"q":0,"r":9,"s":-9}','{"q":-1,"r":9,"s":-8}','{"q":-2,"r":9,"s":-7}','{"q":-3,"r":9,"s":-6}','{"q":-4,"r":9,"s":-5}','{"q":-5,"r":9,"s":-4}','{"q":-5,"r":8,"s":-3}','{"q":-5,"r":7,"s":-2}','{"q":-5,"r":6,"s":-1}','{"q":-5,"r":5,"s":0}','{"q":-4,"r":4,"s":0}','{"q":-3,"r":3,"s":0}','{"q":-2,"r":-1,"s":3}','{"q":-2,"r":-2,"s":4}','{"q":-4,"r":1,"s":3}','{"q":-4,"r":2,"s":2}','{"q":-5,"r":3,"s":2}','{"q":-7,"r":4,"s":3}','{"q":-6,"r":4,"s":2}','{"q":-8,"r":4,"s":4}','{"q":-9,"r":4,"s":5}','{"q":-10,"r":4,"s":6}','{"q":-11,"r":4,"s":7}','{"q":-12,"r":4,"s":8}','{"q":-12,"r":2,"s":10}','{"q":-12,"r":3,"s":9}','{"q":-13,"r":4,"s":9}','{"q":-13,"r":5,"s":8}','{"q":-14,"r":6,"s":8}','{"q":-14,"r":7,"s":7}','{"q":-15,"r":8,"s":7}','{"q":-15,"r":9,"s":6}','{"q":-14,"r":9,"s":5}','{"q":-13,"r":9,"s":4}','{"q":-12,"r":9,"s":3}','{"q":-11,"r":9,"s":2}','{"q":-10,"r":9,"s":1}','{"q":-9,"r":9,"s":0}','{"q":-8,"r":9,"s":-1}','{"q":-7,"r":9,"s":-2}','{"q":-6,"r":9,"s":-3}','{"q":-11,"r":1,"s":10}','{"q":-11,"r":0,"s":11}','{"q":-10,"r":-1,"s":11}','{"q":-10,"r":-2,"s":12}','{"q":-9,"r":-3,"s":12}','{"q":-9,"r":-4,"s":13}','{"q":-8,"r":-5,"s":13}','{"q":-8,"r":-6,"s":14}','{"q":-7,"r":-7,"s":14}','{"q":-7,"r":-8,"s":15}','{"q":-6,"r":-9,"s":15}','{"q":-5,"r":-9,"s":14}','{"q":-4,"r":-9,"s":13}','{"q":-3,"r":-9,"s":12}','{"q":-2,"r":-9,"s":11}','{"q":-1,"r":-9,"s":10}','{"q":0,"r":-9,"s":9}','{"q":1,"r":-9,"s":8}','{"q":2,"r":-9,"s":7}','{"q":3,"r":-9,"s":6}','{"q":4,"r":-9,"s":5}','{"q":-2,"r":-8,"s":10}','{"q":-3,"r":-7,"s":10}','{"q":-4,"r":-6,"s":10}','{"q":-5,"r":-5,"s":10}','{"q":-6,"r":-4,"s":10}','{"q":-7,"r":-4,"s":11}','{"q":-6,"r":-2,"s":8}','{"q":-6,"r":-1,"s":7}','{"q":-6,"r":0,"s":6}','{"q":-6,"r":1,"s":5}','{"q":7,"r":-2,"s":-5}','{"q":8,"r":-2,"s":-6}','{"q":9,"r":-3,"s":-6}','{"q":10,"r":-3,"s":-7}','{"q":4,"r":5,"s":-9}','{"q":4,"r":6,"s":-10}','{"q":5,"r":6,"s":-11}','{"q":5,"r":7,"s":-12}']),x=function(t){Object(u.a)(s,t);var e=Object(l.a)(s);function s(t){var r;return Object(h.a)(this,s),(r=e.call(this,t)).handleMouseMove=r.handleMouseMove.bind(Object(c.a)(r)),r.handleClick=r.handleClick.bind(Object(c.a)(r)),r.state={hexSize:20,hexOrigin:{x:400,y:300},currentHex:{q:0,r:0,s:0,x:0,y:0},obstacles:q,playerPosition:{q:0,r:0,s:0},cameFrom:{},hexPath:[],path:[]},r}return Object(o.a)(s,[{key:"componentWillMount",value:function(){var t=this.getHexParametres();this.setState({canvasSize:{canvasWidth:800,canvasHeight:600},hexParametres:t})}},{key:"componentDidMount",value:function(){var t=this.state.canvasSize,e=t.canvasWidth,s=t.canvasHeight;this.canvasHex.width=e,this.canvasHex.height=s,this.canvasView.width=e,this.canvasView.height=s,this.canvasInteraction.width=e,this.canvasInteraction.height=s,this.getCanvasPosition(this.canvasInteraction),this.drawHex(this.canvasInteraction,this.Point(this.state.playerPosition.x,this.state.playerPosition.y),1,"black","grey",.2),this.drawHexes(),this.drawObstacles()}},{key:"shouldComponentUpdate",value:function(t,e){if(e.currentHex!==this.state.currentHex){var s=e.currentHex,r=(s.q,s.r,s.s,s.x,s.y,this.state.canvasSize),a=r.canvasWidth,i=r.canvasHeight;return this.canvasInteraction.getContext("2d").clearRect(0,0,a,i),this.drawPath(),!0}if(e.cameFrom!==this.state.cameFrom){var n=this.state.canvasSize,h=n.canvasWidth,o=n.canvasHeight,c=this.canvasInteraction.getContext("2d");for(var l in c.clearRect(0,0,h,o),e.cameFrom){var u=JSON.parse(l),q=u.q,x=u.r,v=(u.s,this.hexToPixel(this.Hex(q,x))),d=v.x,f=v.y;this.drawHex(this.canvasView,this.Point(d,f),1,"black","grey",.1);var y=JSON.parse(e.cameFrom[l]),g=this.hexToPixel(this.Hex(y.q,y.r));this.drawArrow(g.x,g.y,d,f)}return!0}return!1}},{key:"getHexCornerCoord",value:function(t,e){var s=60*e+30,r=Math.PI/180*s,a=t.x+this.state.hexSize*Math.cos(r),i=t.y+this.state.hexSize*Math.sin(r);return this.Point(a,i)}},{key:"Point",value:function(t,e){return{x:t,y:e}}},{key:"drawHex",value:function(t,e,s,r,a){for(var i=0;i<=5;i++){var n=this.getHexCornerCoord(e,i),h=this.getHexCornerCoord(e,i+1);this.fillHex(t,e,a),this.drawLine(t,n,h,s,r)}}},{key:"drawLine",value:function(t,e,s,r,a){var i=t.getContext("2d");i.beginPath(),i.moveTo(e.x,e.y),i.strokeStyle=a,i.lineWidth=r,i.lineTo(s.x,s.y),i.stroke(),i.closePath()}},{key:"drawHexes",value:function(){for(var t=this,e=this.state.canvasSize,s=e.canvasWidth,r=e.canvasHeight,a=this.state.hexParametres,i=a.hexWidth,n=a.hexHeight,h=(a.vertDist,a.horizDist,this.state.hexOrigin),o=[],c=4*Math.round(h.x/i),l=Math.round(s-h.x)/i*2,u=Math.round(h.y/(n/2)),q=Math.round((r-h.y)/(n/2)),x=0,v=0;v<=q;v++){v%2==0&&0!==v&&x++;for(var d=-c;d<=l;d++){var f=this.hexToPixel(this.Hex(d-x,v)),y=f.x,g=f.y;if(y>i/2&&y<s-i/2&&g>n/2&&g<r-n/2){this.drawHex(this.canvasHex,this.Point(y,g),1,"black","grey");var H=JSON.stringify(this.Hex(d-x,v,-(d-x)-v));this.state.obstacles.includes(H)||o.push(H)}}}for(var b=0,m=-1;m>=-u;m--){m%2!==0&&b++;for(var k=-c;k<=l;k++){var P=this.hexToPixel(this.Hex(k+b,m)),p=P.x,S=P.y;if(p>i/2&&p<s-i/2&&S>n/2&&S<r-n/2){this.drawHex(this.canvasHex,this.Point(p,S),1,"black","grey");var M=JSON.stringify(this.Hex(k+b,m,-(k+b)-m));this.state.obstacles.includes(M)||o.push(M)}}}o=[].concat(o),this.setState({hexPathMap:o},this.breadthFirstSearchCallback=function(){return t.breadthFirstSearch(t.state.playerPosition)})}},{key:"hexToPixel",value:function(t){var e=this.state.hexOrigin,s=this.state.hexSize*Math.sqrt(3)*(t.q+t.r/2)+e.x,r=3*this.state.hexSize/2*t.r+e.y;return this.Point(s,r)}},{key:"Hex",value:function(t,e,s){return{q:t,r:e,s:s}}},{key:"drawHexCoordinates",value:function(t,e,s){var r=t.getContext("2d");r.fillText(s.q,e.x+6,e.y),r.fillText(s.r,e.x-3,e.y+15),r.fillText(s.s,e.x-12,e.y)}},{key:"getHexParametres",value:function(){var t=2*this.state.hexSize,e=Math.sqrt(3)/2*t;return{hexWidth:e,hexHeight:t,vertDist:3*t/4,horizDist:e}}},{key:"handleMouseMove",value:function(t){var e=this.state.canvasPosition,s=e.left,r=(e.right,e.top),a=(e.bottom,this.state.canvasSize),i=a.canvasWidth,n=a.canvasHeight,h=this.state.hexParametres,o=h.hexWidth,c=h.hexHeight,l=(h.vertDist,h.horizDist,t.pageX-s),u=t.pageY-r,q=this.cubeRound(this.pixelToHex(this.Point(l,u))),x=q.q,v=q.r,d=q.s,f=this.hexToPixel(this.Hex(x,v,d)),y=f.x,g=f.y,H=this.state.playerPosition;this.getDistanceLine(this.Hex(0,0,0),this.Hex(x,v,d)),this.getPath(this.Hex(H.q,H.r,H.s),this.Hex(x,v,d)),console.log(this.state.currentDistanceLine),y>o/2&&y<i-o/2&&g>c/2&&g<n-c/2&&this.setState({currentHex:{q:x,r:v,s:d,x:y,y:g}})}},{key:"getCanvasPosition",value:function(t){var e=t.getBoundingClientRect();this.setState({canvasPosition:{left:e.left,right:e.right,top:e.top,bottom:e.bottom}})}},{key:"pixelToHex",value:function(t){var e=this.state.hexSize,s=this.state.hexOrigin,r=((t.x-s.x)*Math.sqrt(3)/3-(t.y-s.y)/3)/e,a=2*(t.y-s.y)/3/e;return this.Hex(r,a,-r-a)}},{key:"cubeRound",value:function(t){var e=Math.round(t.q),s=Math.round(t.r),r=Math.round(t.s),a=Math.abs(e-t.q),i=Math.abs(s-t.r),n=Math.abs(r-t.s);return a>i&&a>n?e=-s-r:i>n?s=-e-r:r=-e-s,this.Hex(e,s,r)}},{key:"cubeDirections",value:function(t){var e=[this.Hex(1,0,-1),this.Hex(1,-1,0),this.Hex(0,-1,1),this.Hex(-1,0,1),this.Hex(-1,1,0),this.Hex(0,1,-1)];return e[t]}},{key:"cubeAdd",value:function(t,e){return this.Hex(t.q+e.q,t.r+e.r,t.s+e.s)}},{key:"cubeSubstract",value:function(t,e){return this.Hex(t.q-e.q,t.r-e.r,t.s-e.s)}},{key:"getCubeNeighbor",value:function(t,e){return this.cubeAdd(t,this.cubeDirections(e))}},{key:"drawNeighbors",value:function(t){for(var e=0;e<=5;e++){var s=this.getCubeNeighbor(this.Hex(t.q,t.r,t.s),e),r=s.q,a=s.r,i=s.s,n=this.hexToPixel(this.Hex(r,a,i)),h=n.x,o=n.y;this.drawHex(this.canvasInteraction,this.Point(h,o),"red",2)}}},{key:"cubeDistance",value:function(t,e){var s=this.cubeSubstract(t,e),r=s.q,a=s.r,i=s.s;return(Math.abs(r)+Math.abs(a)+Math.abs(i))/2}},{key:"linearInt",value:function(t,e,s){return t+(e-t)*s}},{key:"cubeLinearInt",value:function(t,e,s){return this.Hex(this.linearInt(t.q,e.q,s),this.linearInt(t.r,e.r,s),this.linearInt(t.s,e.s,s))}},{key:"getDistanceLine",value:function(t,e){for(var s=this.cubeDistance(t,e),r=[],a=0;a<=s;a++){var i=this.hexToPixel(this.cubeRound(this.cubeLinearInt(t,e,1/s*a)));r=[].concat(r,i)}this.setState({currentDistanceLine:r})}},{key:"fillHex",value:function(t,e,s){var r=this.getHexCornerCoord(e,0),a=this.getHexCornerCoord(e,1),i=this.getHexCornerCoord(e,2),n=this.getHexCornerCoord(e,3),h=this.getHexCornerCoord(e,4),o=this.getHexCornerCoord(e,5),c=t.getContext("2d");c.beginPath(),c.fillStyle=s,c.globalAlpha=.1,c.moveTo(r.x,r.y),c.lineTo(a.x,a.y),c.lineTo(i.x,i.y),c.lineTo(n.x,n.y),c.lineTo(h.x,h.y),c.lineTo(o.x,o.y),c.closePath(),c.fill()}},{key:"handleClick",value:function(){var t=this,e=this.state,s=e.currentHex,r=e.cameFrom,a=s.q,i=s.r,n=s.s;r[JSON.stringify(this.Hex(a,i,n))]&&this.setState({playerPosition:this.Hex(a,i,n)},this.breadthFirstSearchCallback=function(){return t.breadthFirstSearch(t.state.playerPosition)})}},{key:"drawObstacles",value:function(){var t=this;this.state.obstacles.map((function(e){var s=JSON.parse(e),r=s.q,a=s.r,i=s.s,n=t.hexToPixel(t.Hex(r,a,i)),h=n.x,o=n.y;t.drawHex(t.canvasHex,t.Point(h,o),e,"black","black")}))}},{key:"getNeighbors",value:function(t){for(var e=[],s=0;s<=5;s++){var r=this.getCubeNeighbor(this.Hex(t.q,t.r,t.s),s),a=r.q,i=r.r,n=r.s;e.push(this.Hex(a,i,n))}return e}},{key:"breadthFirstSearch",value:function(t){var e=this,s=[t],r={};for(r[JSON.stringify(t)]=JSON.stringify(t);0!=s.length;){var a=s.shift();this.getNeighbors(a).map((function(t){!r.hasOwnProperty(JSON.stringify(t))&&e.state.hexPathMap.includes(JSON.stringify(t))&&(s.push(t),r[JSON.stringify(t)]=JSON.stringify(a))}))}r=Object.assign({},r),this.setState({cameFrom:r})}},{key:"getPath",value:function(t,e){var s=this.state.cameFrom;if(t=JSON.stringify(t),void 0!=s[e=JSON.stringify(e)]){for(var r=[e];e!=t;)e=s[e],r.push(e);r=[].concat(r),this.setState({path:r})}}},{key:"drawPath",value:function(){for(var t=this.state.path,e=0;e<=t.length-1;e++){var s=JSON.parse(t[e]),r=s.q,a=s.r,i=this.hexToPixel(this.Hex(r,a)),n=i.x,h=i.y;this.drawHex(this.canvasInteraction,this.Point(n,h),1,"black","#05b9f5")}}},{key:"drawArrow",value:function(t,e,s,r){var a=this.canvasView.getContext("2d"),i=Math.atan2(r-e,s-t);a.beginPath(),a.moveTo(t,e),a.lineTo(s,r),a.strokeStyle="#05b9f5",a.lineWidth=3,a.stroke(),a.beginPath(),a.moveTo(s,r),a.globalAlpha=.3,a.lineTo(s-5*Math.cos(i-Math.PI/7),r-5*Math.sin(i-Math.PI/7)),a.lineTo(s-5*Math.cos(i-Math.PI/7),r-5*Math.sin(i-Math.PI/7)),a.lineTo(s,r),a.lineTo(s-5*Math.cos(i-Math.PI/7),r-5*Math.sin(i-Math.PI/7)),a.strokeStyle="#05b9f5",a.lineWidth=5,a.stroke(),a.fillStyle="#05b9f5",a.fill()}},{key:"render",value:function(){var t=this;return a.a.createElement("div",{className:"BFS"},a.a.createElement("canvas",{ref:function(e){return t.canvasHex=e}}),a.a.createElement("canvas",{ref:function(e){return t.canvasCoordinates=e}}),a.a.createElement("canvas",{ref:function(e){return t.canvasView=e}}),a.a.createElement("canvas",{ref:function(e){return t.canvasInteraction=e},onMouseMove:this.handleMouseMove,onClick:this.handleClick}))}}]),s}(a.a.Component);var v=function(){return a.a.createElement("div",{className:"App"},a.a.createElement("div",{className:"container"},a.a.createElement("h1",null,a.a.createElement("span",null,"Breadth-first Real-time Pathfinder"))),a.a.createElement("h3",null,"Navigate your way with the mouse around the obstacles to find the shortest path in real-time and click on any hexagon to change the starting position."),a.a.createElement("br",null),a.a.createElement(x,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(v,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}],[[8,1,2]]]);
//# sourceMappingURL=main.85bae6a0.chunk.js.map